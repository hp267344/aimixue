<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../css/bootstrap.css"/>
		<style type="text/css">
			table{
				table-layout:  fixed;
			}
			.over{
				overflow: hidden;
				white-space: nowrap;
				text-overflow: ellipsis;
			}
		</style>
	</head>
	<body>
		<h1>首页</h1>
		<button class="btn btn-info">新增</button>
		<div class="container">
			
		</div>
		<script src="../js/jquery-1.11.3.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/bootstrap.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			$.get("/getData",(data)=>{
				var table=$("<table class='table table-bordered table-hover table-striped'></table>");
				var tr=$("<tr></tr>");
				for(var i in data[1]){
					if(i=="content"){break};
					tr.append(`<td>${i}</td>`)
				}
				tr.append(`<td>操作</td>`)
				table.append(tr);
				
				for(var r=0;r<data.length;r++){
					var tr=$("<tr></tr>");
					for(var c in data[r]){
						if(c=="content"){break;}
						else if(c=="jianjie"){tr.append(`<td class='over'>${data[r][c]}</td>`)}
						else{tr.append(`<td>${data[r][c]}</td>`)}
					}
					tr.append(`<td style='width:300px'><button class='btn btn-primary btn-sm'>查看</button><button onclick='update(this)' class='btn btn-warning btn-sm'>修改</button><button class='btn btn-danger btn-sm'>删除</button></td>`)
					
					table.append(tr);	
				}
				
				
				$(".container").append(table);
			},"JSON")
			
			$(".btn-info").click(()=>{
				location="./html/insert.html"
			})
			
			function update(btn){
				var id=($(btn).parent().parent().children()[0].innerHTML)
				sessionStorage.id=id;
				location='./html/update.html'
			}
		</script>
	</body>
</html>
